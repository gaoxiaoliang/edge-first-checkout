@startuml
skinparam componentStyle rectangle

actor Cashier

rectangle "Store Edge Node" {
  component "Checkout Web App\n(React)" as Web
  component "Edge API\n(FastAPI)" as EdgeApi
  database "edge_store.db\nSQLite" as EdgeDb
}

rectangle "Central HQ" {
  component "Central Ledger API\n(logical domain)" as CentralApi
  database "central_hq.db\nSQLite" as CentralDb
}

Cashier --> Web : Create checkout
Web --> EdgeApi : POST /edge/transactions
EdgeApi --> EdgeDb : Insert local tx

Web --> EdgeApi : POST /edge/sync/push
EdgeApi --> CentralApi : Push pending txs
CentralApi --> CentralDb : Upsert by\n(edge_tx_id, store_id)
EdgeApi --> EdgeDb : Mark synced_at

Web --> EdgeApi : GET /edge/transactions
Web --> CentralApi : GET /central/transactions
@enduml
