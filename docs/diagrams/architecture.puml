@startuml
skinparam componentStyle rectangle

actor Shopper
actor Admin

rectangle "Store Edge" {
  component "Kiosk Web App\n(React)" as Kiosk
  component "Edge API\n(FastAPI)" as Edge
  database "edge_store.db\nSQLite" as EdgeDB
}

rectangle "Central" {
  component "Central Ledger\n(logical domain)" as Central
  database "central_hq.db\nSQLite" as CentralDB
}

component "Dashboard Web App\n(React)" as Dash

Shopper --> Kiosk : Scan/add/edit/pay
Kiosk --> Edge : POST /edge/checkout
Edge --> EdgeDB : Durable write

Kiosk --> Edge : POST /edge/heartbeat
Kiosk --> Edge : POST /edge/sync
Edge --> Central : Push pending orders
Central --> CentralDB : INSERT order_uuid (unique)
Edge --> EdgeDB : Mark synced

Admin --> Dash : View fleet health
Dash --> Edge : GET /dashboard/*

@enduml
